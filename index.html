<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Research Publication Score Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
<div class="container py-5">
  <div class="card shadow-lg p-4 rounded-4">
    <h2 class="mb-4 text-center">üìä Research Publication Score Calculator</h2>

    <form id="scoreForm" class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Total Authors</label>
        <input type="number" class="form-control" id="totalAuthors" min="1" required />
      </div>
	  
	  <div class="col-md-6">
        <label class="form-label">Role</label>
        <select class="form-select" id="role" required>
          <option value="" selected disabled>-- Select Role --</option>
          <option value="First">First Author</option>
          <option value="Corresponding">Corresponding / Supervisor / Mentor</option>
          <option value="FirstCorresponding">First & Corresponding</option>
          <option value="Other">Other Co-author</option>
        </select>
      </div>
      
	  <div class="col-md-6" id="coAuthorsDiv">
        <label class="form-label">Total Co-authors</label>
        <input type="number" class="form-control" id="totalCoAuthors" min="0" />
        <div class="form-text">Editable only if role is ‚ÄúOther Co-author‚Äù.</div>
      </div>
	  
	  <div class="col-md-6">
        <label class="form-label">Impact Factor</label>
        <input type="number" class="form-control" id="impactFactor" step="0.01" min="0" required />
      </div>
 

      <div class="col-md-6">
        <label class="form-label">Type</label>
        <select class="form-select" id="type" required>
          <option value="UGC">UGC</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <div class="col-12 text-center">
        <button type="submit" class="btn btn-primary px-4 mt-3">Calculate Score</button>
      </div>
    </form>

    <div id="result" class="alert alert-success text-center fw-bold mt-4 d-none"></div>
  </div>
</div>

<script>
  const roleSelect = document.getElementById("role");
  const totalCoAuthorsInput = document.getElementById("totalCoAuthors");

  function syncCoAuthorsWithRole() {
    if (roleSelect.value === "Other") {
      // Editable
      totalCoAuthorsInput.readOnly = false;
      totalCoAuthorsInput.value = "";
      totalCoAuthorsInput.classList.remove("bg-light");
    } else {
      // Auto-set to 0 and lock
      totalCoAuthorsInput.value = "0";
      totalCoAuthorsInput.readOnly = true;
      totalCoAuthorsInput.classList.add("bg-light");
    }
  }

  document.addEventListener("DOMContentLoaded", syncCoAuthorsWithRole);
  roleSelect.addEventListener("change", syncCoAuthorsWithRole);

  document.getElementById("scoreForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const totalAuthors = parseInt(document.getElementById("totalAuthors").value, 10) || 0;
    const impactFactor = parseFloat(document.getElementById("impactFactor").value) || 0;
    const totalCoAuthors = parseInt(totalCoAuthorsInput.value, 10) || 0;
    const role = roleSelect.value;
    const type = document.getElementById("type").value;

    // Impact Factor Score
    let impactScore = 0;
    if (impactFactor === 0) impactScore = 0;
    else if (impactFactor <= 1) impactScore = 5;
    else if (impactFactor <= 2) impactScore = 10;
    else if (impactFactor <= 5) impactScore = 15;
    else if (impactFactor <= 10) impactScore = 20;
    else impactScore = 25;

    // Role Weight (Excel logic)
    let roleWeight = 0;
    if (role === "First" || role === "Corresponding") {
      roleWeight = (totalAuthors === 2) ? 0.5 : 0.35;
    } else if (role === "FirstCorresponding") {
      roleWeight = 1;
    } else if (role === "Other") {
      roleWeight = (totalAuthors === 2) ? 0.3 : .3/totalCoAuthors;
    }

    // Type Score
    const typeScore = (type === "UGC") ? 25 : 10;

    // Final Score
    const finalScore = typeScore + (impactScore * roleWeight);

    const resultDiv = document.getElementById("result");
    resultDiv.textContent = "‚úÖ Final Score: " + finalScore.toFixed(2);
    resultDiv.classList.remove("d-none");
  });
</script>
</body>
</html>
